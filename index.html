<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Typography Layout Calculator</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Lora:wght@400;700&family=Merriweather:wght@400;700&family=Crimson+Text:wght@400;600&family=Playfair+Display:wght@400;700&family=Libre+Baskerville:wght@400;700&family=EB+Garamond:wght@400;600&family=PT+Serif:wght@400;700&family=Inter:wght@400;600&family=Roboto:wght@400;500&family=Open+Sans:wght@400;600&family=Lato:wght@400;700&family=Montserrat:wght@400;600&family=Source+Sans+Pro:wght@400;600&family=Poppins:wght@400;600&family=Raleway:wght@400;600&family=Work+Sans:wght@400;600&family=Roboto+Mono:wght@400&family=Source+Code+Pro:wght@400&family=Fira+Code:wght@400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
  <div class="app-wrapper">
    <div class="container">
      <header>
        <h1>Typography Layout Calculator</h1>
        <p class="subtitle">Calculate optimal column widths based on Bringhurst principles</p>
      </header>

      <form id="layoutForm">
      <section class="form-section">
        <h2>Preferences</h2>
        <div class="form-group">
          <label class="checkbox-label">
            <input type="checkbox" id="facingPages" class="checkbox-input">
            <span>Facing pages (book layout)</span>
          </label>
          <span class="helper-text">Enable for book layouts with inner and outer margins</span>
        </div>
      </section>

      <section class="form-section">
        <h2>Page Dimensions</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="paperSizeSelect">Preset paper size</label>
            <select id="paperSizeSelect" class="paper-size-select">
              <option value="">Custom</option>
            </select>
          </div>
        <div class="form-group">
          <label>Orientation</label>
          <div class="orientation-controls">
            <label class="radio-label" title="Portrait">
              <input type="radio" name="orientation" id="orientationPortrait" value="portrait" checked>
              <span class="material-icons">stay_current_portrait</span>
              <span class="tooltip">Portrait</span>
            </label>
            <label class="radio-label" title="Landscape">
              <input type="radio" name="orientation" id="orientationLandscape" value="landscape">
              <span class="material-icons">stay_current_landscape</span>
              <span class="tooltip">Landscape</span>
            </label>
          </div>
        </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="pageWidth">Page width</label>
            <input type="number" id="pageWidth" value="210" required>
          </div>
          <div class="form-group">
            <label for="pageHeight">Page height</label>
            <input type="number" id="pageHeight" value="297" required>
          </div>
        </div>
      </section>

      <section class="form-section">
        <h2>Margins</h2>
        <div class="form-row">
          <div class="form-group">
            <label for="topMargin">Top</label>
            <input type="number" id="topMargin" value="20" required>
          </div>
          <div class="form-group">
            <label for="bottomMargin">Bottom</label>
            <input type="number" id="bottomMargin" value="20" required>
          </div>
        </div>
        <!-- Single page margins -->
        <div id="singlePageMargins" class="form-row">
          <div class="form-group">
            <label for="leftMargin">Left</label>
            <input type="number" id="leftMargin" value="20" required>
          </div>
          <div class="form-group">
            <label for="rightMargin">Right</label>
            <input type="number" id="rightMargin" value="20" required>
          </div>
        </div>
        <!-- Facing pages margins -->
        <div id="facingPagesMargins" class="form-row" style="display: none;">
          <div class="form-group">
            <label for="innerMarginLeft">Inner left (mm)</label>
            <input type="number" id="innerMarginLeft" value="20" required>
            <span class="helper-text">Left page binding edge</span>
          </div>
          <div class="form-group">
            <label for="innerMarginRight">Inner right (mm)</label>
            <input type="number" id="innerMarginRight" value="20" required>
            <span class="helper-text">Right page binding edge</span>
          </div>
        </div>
        <div id="facingPagesMarginsOuter" class="form-row" style="display: none;">
          <div class="form-group">
            <label for="outerMarginLeft">Outer left (mm)</label>
            <input type="number" id="outerMarginLeft" value="20" required>
            <span class="helper-text">Left page left side</span>
          </div>
          <div class="form-group">
            <label for="outerMarginRight">Outer right (mm)</label>
            <input type="number" id="outerMarginRight" value="20" required>
            <span class="helper-text">Right page right side</span>
          </div>
        </div>
      </section>

      <section class="form-section">
        <h2>Typography Settings</h2>
        <div class="form-group">
          <label for="fontFamily">Typeface</label>
          <select id="fontFamily" class="font-select">
            <option value="serif">Serif (default)</option>
            <option value="Georgia">Georgia</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Lora">Lora</option>
            <option value="Merriweather">Merriweather</option>
            <option value="Crimson Text">Crimson Text</option>
            <option value="Playfair Display">Playfair Display</option>
            <option value="Libre Baskerville">Libre Baskerville</option>
            <option value="EB Garamond">EB Garamond</option>
            <option value="PT Serif">PT Serif</option>
            <option value="sans-serif">Sans-serif (default)</option>
            <option value="Inter">Inter</option>
            <option value="Roboto">Roboto</option>
            <option value="Open Sans">Open Sans</option>
            <option value="Lato">Lato</option>
            <option value="Montserrat">Montserrat</option>
            <option value="Source Sans Pro">Source Sans Pro</option>
            <option value="Poppins">Poppins</option>
            <option value="Raleway">Raleway</option>
            <option value="Work Sans">Work Sans</option>
            <option value="monospace">Monospace (default)</option>
            <option value="Courier New">Courier New</option>
            <option value="Roboto Mono">Roboto Mono</option>
            <option value="Source Code Pro">Source Code Pro</option>
            <option value="Fira Code">Fira Code</option>
          </select>
          <span class="helper-text">Select a typeface for text preview</span>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="typeSize">Type size (pt)</label>
            <input type="number" id="typeSize" value="12" required>
          </div>
          <div class="form-group">
            <label for="numCols">Number of columns</label>
            <input type="number" id="numCols" value="2" min="1" required>
          </div>
        </div>
        <div class="form-group">
          <label>Text box spans columns</label>
          <div id="columnSpanCheckboxes" class="column-span-checkboxes"></div>
          <span class="helper-text">Select which columns the text box should span</span>
        </div>
        <div class="form-group">
          <label>Text appears in columns</label>
          <div id="textColumnCheckboxes" class="column-span-checkboxes"></div>
          <span class="helper-text">Select which columns within the span should display text</span>
        </div>
        <div class="form-group gutter-group">
          <label for="gutterWidth">Gutter width (em)</label>
          <div class="gutter-controls">
            <input type="number" id="gutterWidth" value="" step="0.001" required>
            <button type="button" id="suggestGutterButton" class="btn-secondary">Auto-set</button>
          </div>
          <span id="autoGutterNote" class="helper-text"></span>
        </div>
        <div class="form-group">
          <div class="info-display">
            <span class="info-label">Words per line:</span>
            <span id="wordsPerLine" class="info-value">â€”</span>
          </div>
          <span class="helper-text">Estimated based on column width and type size</span>
        </div>
        <div class="form-group">
          <div class="label-with-action">
            <label for="sampleText">Sample text</label>
            <div class="text-actions">
              <button type="button" id="loadDefaultTextButton" class="btn-link">Load default text</button>
              <span class="text-action-separator">|</span>
              <button type="button" id="clearTextButton" class="btn-link">Clear</button>
            </div>
          </div>
          <textarea id="sampleText" rows="4" placeholder="Enter sample text to preview how it will look in your layout..."></textarea>
          <span class="helper-text">Preview how your text will appear in the calculated columns</span>
        </div>
      </section>
      </form>

      <section id="results" class="results-section">
        <h2>Results</h2>
        <div id="resultsContent" class="results-content"></div>
      </section>
    </div>

    <section class="visualization-section">
      <div class="section-header">
        <h2>Page Layout Preview</h2>
        <div class="header-actions">
          <span id="scaleIndicator" class="scale-indicator"></span>
          <button type="button" id="exportHtmlButton" class="btn-export">Export as HTML</button>
        </div>
      </div>
      <div class="layer-controls">
        <label class="layer-checkbox">
          <input type="checkbox" id="showMargins" checked>
          <span>Margins</span>
        </label>
        <label class="layer-checkbox">
          <input type="checkbox" id="showColumns" checked>
          <span>Columns</span>
        </label>
        <label class="layer-checkbox">
          <input type="checkbox" id="showText" checked>
          <span>Text</span>
        </label>
      </div>
      <div id="visualizationContainer" class="visualization-container"></div>
    </section>
  </div>

  <script type="module" src="dist/main.js"></script>
</body>
</html>